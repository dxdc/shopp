/*!
 * setup.js - General settings screen behaviors
 * Copyright Â© 2008-2010 by Ingenesis Limited
 * Licensed under the GPLv3 {@see license.txt}
 */
jQuery(document).ready(function(c){var d,b=c("#base_operations_zone").selectize({onInitialize:function(){if(Object.keys(this.options).length<1){this.$control.hide()}}}),a=b[0].selectize;c("#base_operations").selectize({onChange:function(e){if(e==""){a.disable();return true}a.disable();a.settings.placeholder=$ss.loading;a.updatePlaceholder();a.clearOptions();a.load(function(f){d&&d.abort();d=c.getJSON(zones_url+"&action=shopp_country_zones&country="+e,function(g){if(false==g||g.length==0){a.settings.placeholder=" ";a.updatePlaceholder();a.$control.fadeOut(200);return}else{a.$control.show()}a.enable();c.each(g,function(i,h){if(0==i){a.settings.placeholder=sprintf($ss.prompt,[h]);a.updatePlaceholder();return}a.addOption({text:h,value:i})});a.open()},function(){f()})})}});c("#selectall_targetmarkets").change(function(){if(c(this).attr("checked")){c("#target_markets input").not(this).attr("checked",true)}else{c("#target_markets input").not(this).attr("checked",false)}});c("#target_markets ul").sortable({axis:"y",items:"li:has(input:checked):not(.quick-select)"})});